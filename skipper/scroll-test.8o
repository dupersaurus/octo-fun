:alias x v0
:alias y v1
:alias height v2
:alias tick v3
:alias slice-index v4
:alias background-step v5

: main
	hires
	
  scroll-slice-test
;

: scroll-slice-test
	pick-background-slice
	
	loop
		plane 3
		scroll-left
	
		draw-slice
	
		vf := 10
		delay := vf
		
		loop
			vf := delay
			if vf != 0 then
		again
	again
;

: pick-background-slice
	i := mountain-chain-sliced
	slice-index := 0
	background-step := 0
;

: draw-slice
	x := 123
	y := 16
	height := 15
	
	plane 1
	sprite x y 15
	y += height
	i += height
	sprite x y 15
	
	slice-index += 1
	i += height
	
	if slice-index == 32 then pick-background-slice
;

: small-hill 
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x01 0xC0 0x06 0x30 0x08 0x78 0x10 0xFC 0x21 0xDE 0x49 0x9E 0x9B 0xBF 0xFF 0xFF
0x97 0xBF 0x41 0xDE 0x30 0x7C 0x0E 0x30 0x01 0xC0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

: water-surface-sliced
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xFF

: mountain-chain-sliced
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0x60 0x60 0x80 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0xE0 0xC0 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x30 0x20 0x40 0x80 0x00 0x00 0x00 0x10 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x80 0xE0 0x70 0x70 0x60 0xE0 0xC0 0x80 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x10 0x70 0xE0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x30 0xE0 0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x10 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x40
0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0x70 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0x80 0xC0
0xC0 0xE0 0x70 0x70 0x70 0x30 0x30 0x30 0x70 0xF0 0xF0 0xF0 0xE0 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0xC0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x80 0xE0 0xF0 0xF0 0xC0 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x30 0xE0 0x80 0x00 0x00 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x30 0xC0 0x00 0x00 0x30 0x60 0x00 0x00 0x00 0x00 0x10 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x30 0x60 0x80 0x00 0x00 0x00 0x30 0xF0 0x00 0x00 0x00 0x10 0x70 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x70 0xF0
0xC0 0x00 0x00 0x00 0x30 0xF0 0xC0 0x00 0x00 0x00 0x30 0xF0 0xE0 0xC0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x70 0xF0 0xE0 0xC0 0x00
0x00 0x10 0x70 0xE0 0xC0 0x00 0x00 0x10 0x30 0xF0 0xF0 0xC0 0x00 0x30 0xF0
0x00 0x00 0x00 0x00 0x00 0x10 0x20 0xE0 0xC0 0x80 0x80 0x00 0x00 0x00 0x00
0x80 0x80 0x80 0x00 0x00 0x10 0xF0 0xF0 0xF0 0xF0 0xB0 0x30 0xF0 0xC0 0xF0
0x00 0x00 0x00 0x10 0x60 0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10
0x10 0x10 0x30 0x30 0x70 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xC0 0x80 0x00 0xF0
0x00 0x00 0x10 0xE0 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x70 0x70 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xE0 0xC0 0x80 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0xF0 0x10 0x00 0x00 0x10 0x70 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xD0 0x90 0x10 0x10 0x10 0x10 0x30 0x30 0x70 0xF0 0xF0
0x00 0x00 0xC0 0xF0 0x70 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x80 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0xC0 0xE0 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x80 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x10 0x60 0xC0 0x80 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10
0x30 0xC0 0x80 0x00 0x00 0x00 0x10 0x10 0x30 0x10 0xD0 0xE0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0x70 0x70 0xB0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x80 0x80 0x80 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xC0 0xE0 0xF0