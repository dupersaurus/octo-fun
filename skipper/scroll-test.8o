:alias x v2
:alias y v3
:alias height v4
:alias tick v5
:alias slice-index v6
:alias background-step v7

: main
	hires
	
  scroll-slice-test
;

: scroll-slice-test
	pick-background-slice
	
	loop
		plane 3
		scroll-left
	
		draw-slice
	
		vf := 10
		delay := vf
		
		loop
			vf := delay
			if vf != 0 then
		again
	again
;

: pick-background-slice
	i := mountain-chain-sliced
	slice-index := 0
	background-step := 0
;

: draw-next-slice
	v0 := slice-index
	jump0 mountains-jump
;

: draw-slice
	x := 123
	y := 16
	height := 15
	
	plane 1
	sprite x y 15
	y += height
	i += height
	sprite x y 15
	
	slice-index += 2
	i += height
	
	if slice-index == 64 then pick-background-slice
;

: select-background-slice
	vd := 0
	ve := height

	loop
		while vd != slice-index
		i += ve
		vd += 1
	again
;

: mountains-jump
	i := mountains-0 jump draw-slice
	i := mountains-1 jump draw-slice
	i := mountains-2 jump draw-slice
	i := mountains-3 jump draw-slice
	i := mountains-4 jump draw-slice
	i := mountains-5 jump draw-slice
	i := mountains-6 jump draw-slice
	i := mountains-7 jump draw-slice
	i := mountains-8 jump draw-slice
	i := mountains-9 jump draw-slice
	i := mountains-10 jump draw-slice
	i := mountains-11 jump draw-slice
	i := mountains-12 jump draw-slice
	i := mountains-13 jump draw-slice
	i := mountains-14 jump draw-slice
	i := mountains-15 jump draw-slice
	i := mountains-16 jump draw-slice
	i := mountains-17 jump draw-slice
	i := mountains-18 jump draw-slice
	i := mountains-19 jump draw-slice
	i := mountains-20 jump draw-slice
	i := mountains-21 jump draw-slice
	i := mountains-22 jump draw-slice
	i := mountains-23 jump draw-slice
	i := mountains-24 jump draw-slice
	i := mountains-25 jump draw-slice
	i := mountains-26 jump draw-slice
	i := mountains-27 jump draw-slice
	i := mountains-28 jump draw-slice
	i := mountains-29 jump draw-slice
	i := mountains-30 jump draw-slice
	i := mountains-31 jump draw-slice
;

: mountains-0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xF0
: mountains-1 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0xF0
: mountains-2 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xF0 0xF0 0xF0
: mountains-3 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0x60 0x60 0x80 0x00 0xF0
: mountains-4 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0xE0 0xC0 0x00 0x00 0x00 0x00 0xF0
: mountains-5 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0x20 0x40 0x80 0x00 0x00 0x00 0x10 0x00 0x00 0x00 0xF0
: mountains-6 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0xE0 0x70 0x70 0x60 0xE0 0xC0 0x80 0x00 0x00 0x00 0xF0
: mountains-7 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x70 0xE0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xF0
: mountains-8 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0xE0 0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x10 0xF0
: mountains-9 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x40 0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0x70 0xF0 0xF0 0xF0
: mountains-10 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0x80 0xC0 0xC0 0xE0 0x70 0x70 0x70 0x30 0x30 0x30 0x70 0xF0 0xF0 0xF0 0xE0 0x00 0xF0
: mountains-11 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xC0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0x00 0x00 0x00 0xF0
: mountains-12 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0xE0 0xF0 0xF0 0xC0 0x00 0x00 0x00 0x00 0xF0
: mountains-13 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0xE0 0x80 0x00 0x00 0x00 0x00 0x00 0x00 0xF0
: mountains-14 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0xC0 0x00 0x00 0x30 0x60 0x00 0x00 0x00 0x00 0x10 0xF0
: mountains-15 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0x60 0x80 0x00 0x00 0x00 0x30 0xF0 0x00 0x00 0x00 0x10 0x70 0xF0 0xF0
: mountains-16 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x70 0xF0 0xC0 0x00 0x00 0x00 0x30 0xF0 0xC0 0x00 0x00 0x00 0x30 0xF0 0xE0 0xC0 0xF0
: mountains-17 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x70 0xF0 0xE0 0xC0 0x00 0x00 0x10 0x70 0xE0 0xC0 0x00 0x00 0x10 0x30 0xF0 0xF0 0xC0 0x00 0x30 0xF0
: mountains-18 0x00 0x00 0x00 0x00 0x00 0x10 0x20 0xE0 0xC0 0x80 0x80 0x00 0x00 0x00 0x00 0x80 0x80 0x80 0x00 0x00 0x10 0xF0 0xF0 0xF0 0xF0 0xB0 0x30 0xF0 0xC0 0xF0
: mountains-19 0x00 0x00 0x00 0x10 0x60 0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x10 0x10 0x30 0x30 0x70 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xC0 0x80 0x00 0xF0
: mountains-20 0x00 0x00 0x10 0xE0 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x70 0x70 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xE0 0xC0 0x80 0x00 0x00 0x00 0x00 0xF0
: mountains-21 0x00 0x00 0xF0 0x10 0x00 0x00 0x10 0x70 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xD0 0x90 0x10 0x10 0x10 0x10 0x30 0x30 0x70 0xF0 0xF0
: mountains-22 0x00 0x00 0xC0 0xF0 0x70 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
: mountains-23 0x00 0x00 0x00 0x00 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
: mountains-24 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
: mountains-25 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
: mountains-26 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
: mountains-27 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x60 0xC0 0x80 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
: mountains-28 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0xC0 0x80 0x00 0x00 0x00 0x10 0x10 0x30 0x10 0xD0 0xE0 0xF0 0xF0 0xF0
: mountains-29 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0x70 0x70 0xB0 0xF0
: mountains-30 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0x80 0x80 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0
: mountains-31 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xC0 0xE0 0xF0

: small-hill 
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x01 0xC0 0x06 0x30 0x08 0x78 0x10 0xFC 0x21 0xDE 0x49 0x9E 0x9B 0xBF 0xFF 0xFF
0x97 0xBF 0x41 0xDE 0x30 0x7C 0x0E 0x30 0x01 0xC0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

: water-surface-sliced
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xFF

: mountain-chain-sliced
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0x60 0x60 0x80 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0xE0 0xC0 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x30 0x20 0x40 0x80 0x00 0x00 0x00 0x10 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x80 0xE0 0x70 0x70 0x60 0xE0 0xC0 0x80 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x10 0x70 0xE0 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x30 0xE0 0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x10 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x40
0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x30 0x70 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0x80 0xC0
0xC0 0xE0 0x70 0x70 0x70 0x30 0x30 0x30 0x70 0xF0 0xF0 0xF0 0xE0 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0xC0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x80 0xE0 0xF0 0xF0 0xC0 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x30 0xE0 0x80 0x00 0x00 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x30 0xC0 0x00 0x00 0x30 0x60 0x00 0x00 0x00 0x00 0x10 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x30 0x60 0x80 0x00 0x00 0x00 0x30 0xF0 0x00 0x00 0x00 0x10 0x70 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x70 0xF0
0xC0 0x00 0x00 0x00 0x30 0xF0 0xC0 0x00 0x00 0x00 0x30 0xF0 0xE0 0xC0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x70 0xF0 0xE0 0xC0 0x00
0x00 0x10 0x70 0xE0 0xC0 0x00 0x00 0x10 0x30 0xF0 0xF0 0xC0 0x00 0x30 0xF0
0x00 0x00 0x00 0x00 0x00 0x10 0x20 0xE0 0xC0 0x80 0x80 0x00 0x00 0x00 0x00
0x80 0x80 0x80 0x00 0x00 0x10 0xF0 0xF0 0xF0 0xF0 0xB0 0x30 0xF0 0xC0 0xF0
0x00 0x00 0x00 0x10 0x60 0x80 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10
0x10 0x10 0x30 0x30 0x70 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xC0 0x80 0x00 0xF0
0x00 0x00 0x10 0xE0 0x00 0x00 0x00 0x00 0x00 0x10 0x30 0x70 0x70 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xE0 0xC0 0x80 0x00 0x00 0x00 0x00 0xF0
0x00 0x00 0xF0 0x10 0x00 0x00 0x10 0x70 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xD0 0x90 0x10 0x10 0x10 0x10 0x30 0x30 0x70 0xF0 0xF0
0x00 0x00 0xC0 0xF0 0x70 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x80 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x80 0xC0 0xE0 0xF0 0xF0
0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x80 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x10 0x60 0xC0 0x80 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x10
0x30 0xC0 0x80 0x00 0x00 0x00 0x10 0x10 0x30 0x10 0xD0 0xE0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0xF0 0x70 0x70 0xB0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x80 0x80 0x80 0x80 0xC0 0xE0 0xF0 0xF0 0xF0 0xF0
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00 0xC0 0xE0 0xF0